{% extends "base.html" %}
{% block content %}

<div class="container" style="background-color: rgb(255, 255, 255) !important; width: 100% !important; padding-left: 0 !important; padding-right: 0 !important; margin-left: 2px !important; margin-right: 2px !important; margin-top: 0; box-sizing: border-box;">
  <br>
  <div class="row" style="margin-top: 0; padding-top: 0;">
    <div class="col-md-6 classy_frame" style="padding-top: 0%;">
      <center>
        <h3 style="text-transform: capitalize;">Put Your Waste Material Here!</h3>
      </center>
      <img id="preview" src="{{ url_for('static', filename = 'images/putwaste.gif') }}" height="400px" width="100%"
        title="client pic">

      <center>
        <br>
        <div class="image-upload">
          <p style="color:rgb(221, 0, 255);" id="upload-web">Click the image upload icon below to upload a image.</p
            style="color:wheat;">
          <p style="color:rgb(255, 255, 255);" id="upload-mobile">Click the camera icon below to click a image.</p
            style="color:wheat;">

          <label for="file">
            <img id="upload-web" src="{{ url_for('static', filename = 'images/upload.png') }}" />
            <img id="upload-mobile" src="{{ url_for('static', filename = 'images/camera.png') }}" />

          </label>
          <input type="file" name="file" id="file" onchange="previewImage()">
        </div>

        <br>
        <button class="classify-button" onclick="classifyWaste()">Classify your waste material</button>
      </center>
      <br>
    </div>

    <div class="col-md-6 classy_frame" style="padding-top: 0%;color: rgb(85, 22, 91) !important " id="about">
      <center>
        <h3 style="text-transform: capitalize;">About</h3>
      </center>
      <h4 style="background-color: rgb(255, 255, 255) !important; color: rgb(43, 0, 46) !important ;">The hazardous
        effects of waste on Earth are deeply concerning. Every year, over 8 million tons of plastic waste alone find
        their way into our oceans, harming marine life and ecosystems.
        Toxic chemicals from electronic waste leach into soil and groundwater, endangering both human health and
        wildlife.
        Air pollution from burning waste contributes to respiratory diseases, affecting millions worldwide.
        These consequences underscore the urgent need for responsible waste management and recycling practices to
        protect our planet
        and its inhabitants.Recycling offers a promising solution to our environmental challenges. It conserves
        resources, with recycling one ton of paper saving 17 trees and 7,000 gallons of water.
        Furthermore, recycling reduces greenhouse gas emissions, playing a vital role in combating climate change.
        Together, through recycling, we can contribute to a cleaner and more sustainable future.</h4>


    </div>
    <div class="col-md-6 classy_frame" style="padding-top: 0%;  text-align: center; display: block !important; border-radius: 10px;" id="guidelines">
      <center><h3 style="text-transform: capitalize;">Dear Visitor,</h3></center>
      <h4 style="background-color: rgb(156, 55, 149) !important; color: rgb(255, 255, 255); margin-top: 0;">By clicking the button below, you can access invaluable information that outlines best practices for reducing, reusing, and recycling waste to protect our planet and public health.</h4>
      <a href="https://moef.gov.in/en/service/environment/waste-management/" target="_blank">
        <button style="width : 150px;font-size: 25px; background-color: rgb(156, 55, 149); color: white;">Guidelines</button>
      </a>

  </div>
</div>

<div class="row" id="recycling-videos" style="display: none;">
  <br>
  <hr style="height: 20px; background-color: black; margin-bottom: 0;">
  <h3 id="video-title" style="text-align: center; border-top: none; margin-top: 0;">How Clothes Recycling Works?</h3>
  <div class="col-md-6 col-xs-6 classy_frame" style="padding-top: 0%; padding-bottom: 2%;">
    <div class="embed-responsive embed-responsive-16by9">
      <iframe id="video1" width="50" height="50" src="https://www.youtube.com/embed/zO3jFKiqmHo" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope;" allowfullscreen></iframe>
    </div>
  </div>
  <div class="col-md-6 col-xs-6 classy_frame" style="padding-top: 0%; padding-bottom: 2%;">
    <div class="embed-responsive embed-responsive-16by9">
      <iframe id="video2" width="50" height="50" src="https://www.youtube.com/embed/I_fUpP-hq3A" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope;" allowfullscreen></iframe>
    </div>
  </div>
</div>
<hr style="height: 20px ; background-color: black; margin: 0;">




<div class="row" id="govt-schemes">
  <h3 id="govt-ini" style="text-align: center; border-top: none; margin-top: 0;">Checkout the Latest Government Initiatives</h3>
  <div class="col-md-6 col-12 classy_frame" style="padding-top: 0%; padding-bottom: 2%;">
    <center>
      <h2 style="text-transform: capitalize;" id="heading">Initial heading</h2>
    </center>

    <div class="embed-responsive embed-responsive-16by9">
      <iframe id="video" width="560" height="315" src="https://www.youtube.com/embed/qNj8ESmSwcI?si=6EgecneGQRQgLegb"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
    </div>
  </div>
  <div class="col-md-6 col-12 classy_frame" style="padding-top: 0%; padding-bottom: 2%; text-align: center;">

    <center>
      <h2 style="text-transform: capitalize;">About</h2>
    </center>



    <div class="col-md-12 classy_frame" id="about-section"
      style="text-align: center; padding: 5px 10px !important; font-size: 33px; color: rgb(85, 22, 91) !important; margin-top: 10px;">

      <h4 style="background-color: rgb(156, 55, 149) !important; color: rgb(85, 22, 91);">The Guidelines on Extended
        Producer Responsibility (EPR) for plastic packaging vide Plastic Waste Management (Amendment) Rules, 2022, on
        16th February 2022. The Guidelines stipulate mandatory targets on EPR, recycling of plastic packaging waste,
        reuse of rigid plastic packaging and use of recycled plastic content.</h4>

    </div>
    <button id="left-arrow" class="arrow-button"
      style="background: black; border: solid black; font-size: 24px; cursor: pointer; margin-right: 10px;">&#9664;</button>
    <button id="right-arrow" class="arrow-button"
      style="background: black; border: solid black; font-size: 24px; cursor: pointer; margin-left: auto;">&#9654;</button>
  </div>
</div>


<script>
  var imgData;
  var loading = document.getElementById("loading");
  var govtschemes = document.getElementById("govt-schemes");
  var recyclingvideos = document.getElementById("recycling-videos");
  const heading = document.getElementById('heading');
  const video = document.getElementById('video');
  const aboutSection = document.getElementById('about-section');
  const leftArrow = document.getElementById('left-arrow');
  const rightArrow = document.getElementById('right-arrow');



  const data = [
    {
      heading: 'Plastic Waste Management Rules 2022',
      videoSrc: 'https://www.youtube.com/embed/qNj8ESmSwcI?si=6EgecneGQRQgLegb',
      about: 'The Guidelines on Extended Producer Responsibility (EPR) for plastic packaging vide Plastic Waste Management (Amendment) Rules, 2022, on 16th February 2022. The Guidelines stipulate mandatory targets on EPR, recycling of plastic packaging waste, reuse of rigid plastic packaging and use of recycled plastic content.'
    },
    {
      heading: 'Prakriti- Green Initiative',
      videoSrc: 'https://www.youtube.com/embed/a9lERQHANJU?si=_J_fnfZOI0IUpJHy',
      about: 'In another step toward eliminating single-use plastic, the Union Environment Ministry has launched “Prakriti”, a mascot to spread greater awareness about small changes that can be sustainably adopted in the lifestyle for a better environment'
    },
    {
      heading: 'Waste to Wealth Mission',
      videoSrc: 'https://www.youtube.com/embed/-dFtR0sGqmM?si=3eobP1xZfBvMW-Oo',
      about: 'This mission will identify, develop, and deploy technologies to treat waste to generate energy, recycle materials, and extract worth. The Waste to Wealth Mission is one of the nine national missions of the Prime Minister’s Science, Technology, and Innovation Advisory Council '
    }
  ];

  let currentIndex = 0;

  leftArrow.addEventListener('click', function () {
    currentIndex = (currentIndex - 1 + data.length) % data.length;
    updateContent();
  });

  rightArrow.addEventListener('click', function () {
    currentIndex = (currentIndex + 1) % data.length;
    updateContent();
  });

  function updateContent() {
    const currentData = data[currentIndex];
    heading.textContent = currentData.heading;
    video.src = currentData.videoSrc;
    aboutSection.textContent = currentData.about;
  }

  updateContent();

  govtschemes.style.display = "none";
  recyclingvideos.style.display = "none";










  function previewImage() {

    var file = document.getElementById("file").files;
    if (file.length > 0) {
      var fileName = file[0].name;
      var allowed_extensions = new Array("jpeg", "jpg", "png");
      var file_extension = fileName.split('.').pop().toLowerCase();

      if (allowed_extensions[0] == file_extension || allowed_extensions[1] == file_extension || allowed_extensions[2] == file_extension) {
        var imgObj = document.getElementById("preview");
        var fileReader = new FileReader();

        fileReader.onload = function (event) {
          document.getElementById("preview").setAttribute("src", event.target.result);
          imgData = event.target.result;
        };

        fileReader.readAsDataURL(file[0]);
      }
      else {
        document.getElementById("file").value = "";
        document.getElementById("errorTitle").innerHTML = "Error - Only Image File Acceptable";
        document.getElementById("errorMessage").innerHTML = "We only accept image with .jpeg .jpg or .png extensions.";
        $("#errorPopup").modal("show");

      }


    }
  }

  function classifyWaste() {
    var file = document.getElementById("file").files;
    if (file.length > 0) {
      loading.style.display = "block";
      govtschemes.style.display = "block";
      recyclingvideos.style.display = "block";

      var form_data = new FormData();
      form_data.append("file", document.getElementById("file").files[0]);
      $.ajax({
        url: 'classifywaste', // point to server-side URL
        dataType: 'json', // what to expect back from server
        cache: false,
        contentType: false,
        processData: false,
        data: form_data,
        type: 'post',
        success: function (data) {

          var predicted_value = data["predicted_value"];
          var details = data["details"];
          var video1 = data["video1"];
          var video2 = data["video2"];

          var about = document.getElementById("about");
          var videotitle = document.getElementById("video-title");

          about.innerHTML = "<center><h3>Type - <b>" + predicted_value + "</b></h3></center><h4>" + details + "</h4>";
          videotitle.innerHTML = "Here is how " + predicted_value + " are Recycled ";

          document.getElementById("video1").setAttribute("src", "https://www.youtube.com/embed/" + video1);
          document.getElementById("video2").setAttribute("src", "https://www.youtube.com/embed/" + video2);

          loading.style.display = "none";
        }

      });
    }
    else {
      document.getElementById("errorTitle").innerHTML = "Error - Upload an Image Please!";
      document.getElementById("errorMessage").innerHTML = "Please upload image of your waste material.";
      $("#errorPopup").modal("show");
    }
  }
</script>


{% endblock %}